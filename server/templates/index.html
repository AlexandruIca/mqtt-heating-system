<html lang="en">
<head>
    <title>Heating system</title>
	<style>
        :root {
            --background: lightgray;
            --highlight: darkgray;
            font-size: 20px;
        }
        body {
            margin: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            background: var(--background);}
        #container {
            width: 50%;
            margin: auto;}
            .holder {
                display: flex;
                justify-content: space-between;
                margin: 2rem auto;}
                p {margin: auto;}
                button {
                    font-size: 1rem;
                    width: 2em;
                    height: 2em;
                    background: transparent;
                    border: 1px solid black;
                    border-radius: 100%;
                    transition-property: background-color;
                    transition-duration: .5s;}
                button:hover { background: var(--highlight); }
            #error {
                color: red;
                text-align: center;}
	</style>
    <script>
        async function post(path, id) {
            const res = await fetch(path, {method: 'POST'})
            const json = await res.json()
            console.log(json)
            if(json.error)
                document.getElementById('error').innerHTML = json.error
            else
                document.getElementById('error').innerHTML = ""
            document.getElementById(id).innerHTML = json.value
        }

        function setTempSchedule() {
            var data = {
                day: document.getElementById('days').value,
                start_hour: document.getElementById('start_hour').value,
                stop_hour: document.getElementById('stop_hour').value,
                scheduled_temp: document.getElementById('scheduled_temp').value,
            };
                
            fetch(`/schedule_temp`, {method: 'POST', body: JSON.stringify(data)})
                .then(x => x.json())
                .then(x =>  console.log(x));
        }
    </script>
</head>
<body>
    <div id="container">
        <div class="holder">
            <button onClick="post('/temperature_down', 'temp')">-</button>
            <p>Temperature value: <span id="temp">{{ temperature }}</span></p>
            <button onClick="post('/temperature_up', 'temp')">+</button>
        </div>
        <div class="holder">
            <button onClick="post('/water_temperature_down', 'wtemp')">-</button>
            <p>Water temperature value: <span id="wtemp">{{ water }}</span></p>
            <button onClick="post('/water_temperature_up', 'wtemp')">+</button>
        </div>

        <div>
            <p>Current Schedule: {{ schedule }}</p>
        </div>
        <div class="wrap">
            <label for="days">Choose day of the week:</label>

            <select name="days" id="days">
                <option value="mon">Monday</option>
                <option value="tue">Tuesday</option>
                <option value="wed">Wednesday</option>
                <option value="thu">Thursday</option>
                <option value="fri">Friday</option>
                <option value="sat">Saturday</option>
                <option value="sun">Sunday</option>
            </select>

            <label for="start_hour">Start at:</label>
            <input name="start_hour" id="start_hour" type="text">

            <label for="stop_hour">Stop at:</label>
            <input name="stop_hour" id="stop_hour" type="text">

            <label for="scheduled_temp">Temperature:</label>
            <input name="scheduled_temp" id="scheduled_temp" type="text">

            <button onClick="setTempSchedule()">Set</button>
        </div>

        <p id="error"></p>
    </div>

</body>
